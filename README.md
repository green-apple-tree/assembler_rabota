# Учебная Виртуальная Машина (УВМ)

Вариант 10Проект реализует инструментарий для работы с учебной виртуальной машиной (УВМ) согласно заданию №10. В состав входят: ассемблер, интерпретатор, модуль автоматического тестирования и графическая среда разработки (IDE).

## Структура проекта* **`assembler.py`** - Ассемблер. Транслирует исходный код в бинарный файл. В режиме тестирования выводит промежуточное представление (IR) и шестнадцатеричный дамп команд.
* **`interpreter.py`** — Интерпретатор. Выполняет бинарный код, выводит пошаговый лог выполнения и сохраняет дамп памяти в формате CSV.
* **`gui.py`** - Графическая среда разработки (IDE) с поддержкой синтаксиса ассемблера и табличного просмотра результатов.
* **`test_system.py`** - Модуль модульного тестирования (Unit tests) для проверки корректности бинарного кодирования и логики команд.
* **`test_task.asm`** - Пример программы (Тестовое задание: поэлементная обработка векторов).
* **`README.md`** - Документация проекта.

## Требования* Python 3.8 или выше.
* Стандартные библиотеки Python (установка внешних зависимостей не требуется).

##Запуск и использование (CLI)###1. АссемблерПринимает входной файл с кодом и путь к выходному бинарному файлу.

**Базовый запуск:**

```bash
python assembler.py source.asm output.bin

```

**Режим тестирования (`--test`):**
В этом режиме ассемблер выводит на экран:

1. Промежуточное представление программы (список команд и аргументов).
2. Сгенерированный байт-код в шестнадцатеричном формате.
3. Детальную таблицу соответствия команд и байтов.

```bash
python assembler.py test_task.asm test.bin --test

```

### 2. ИнтерпретаторВыполняет бинарный файл и сохраняет дамп памяти в файл формата **CSV**.

```bash
python interpreter.py <binary_file.bin> <output.csv> <start_addr:end_addr>

```

В процессе выполнения в консоль выводится подробный лог (трассировка) каждой инструкции и состояние стека.

**Пример:**

```bash
python interpreter.py test.bin dump.csv 0:30

```

### 3. Автоматические тестыСкрипт проверяет соответствие сгенерированных бинарных команд эталонным значениям из задания и корректность выполнения арифметических операций.

```bash
python test_system.py

```

## Графический интерфейс (GUI)Для запуска среды разработки выполните команду:

```bash
python gui.py

```

**Функциональность:**

* **Редактор**: Окно для написания кода на языке ассемблера.
* **Собрать и Запустить**: Автоматически ассемблирует код, выполняет его и отображает результат (CSV) в правом окне.
* **Логи**: Нижняя панель отображает ход сборки и выполнения.

##Система команд (Вариант 10)Архитектура: Стековая. Размер команды: 4 байта (Little Endian).

| Команда | Opcode | Биты (Структура) | Описание |
| --- | --- | --- | --- |
| **LOAD** `<val>` | 50 (0x32) | 0-5: Opcode<br>

<br>6-26: Const | Загрузка константы `<val>` на вершину стека. |
| **READ** | 33 (0x21) | 0-5: Opcode | Чтение из памяти. Адрес берется с вершины стека. Результат помещается на стек. |
| **WRITE** `<offset>` | 16 (0x10) | 0-5: Opcode<br>

<br>6-17: Offset | Запись в память. <br>

<br>1. Снять `BaseAddr` со стека.<br>

<br>2. Снять `Value` со стека.<br>

<br>3. `Mem[BaseAddr + Offset] = Value`. |
| **SAR** `<offset>` | 10 (0x0A) | 0-5: Opcode<br>

<br>6-17: Offset | Побитовый сдвиг вправо.<br>

<br>1. Снять `Addr` со стека.<br>

<br>2. Прочитать сдвиг из `Mem[Addr + Offset]`.<br>

<br>3. Прочитать значение из `Mem[Addr]`.<br>

<br>4. Сдвинуть значение вправо.<br>

<br>5. Записать результат обратно в `Mem[Addr]`. |

## Тестовое заданиеВ файле `test_task.asm` реализована программа обработки двух векторов длины 5.

1. **Вектор данных** (исходные числа) загружается по адресам **10–14**.
2. **Вектор сдвигов** (величины сдвига) загружается по адресам **20–24**.
3. Выполняется операция `SAR` с offset=10 (связывает адрес 10 с адресом 20 и т.д.).
4. Результат сохраняется по месту исходных данных.

**Пример результата (`dump.csv`):**

```csv
Address,Value
10,50
11,50
12,37
13,25
14,15
...

```
